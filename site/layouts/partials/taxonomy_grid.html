{{/* Show posts belonging to the current taxonomy term */}}
{{ $paginator := .Paginate (.Pages.ByDate.Reverse) 6 }}

<section class="taxonomy-grid secondary-grid" data-term="{{ .Title | urlize }}">
  {{ range $index, $post := $paginator.Pages }}
    <article class="article">
    <!--{{/* Desactivamos las fotos para esta sección*/}}
      {{/* with .Params.thumbnail }}
        <div class="featured-thumbnail">
          <img src="{{ relURL . }}" alt="Featured Image"/>
        </div>
      {{ end */}}

      <div class="article-content-tax">
        <div class="categories">
          {{ with .Params.categories }}

            {{ range first 1 . }}
              <a href="{{ relURL (print "/categories/" . | urlize) }}">{{ . }}</a>
            {{ end }}
          {{ else }}
            <a>{{ default "Uncategorized" .Site.Params.text.uncategorized }}</a>
          {{ end }}
        </div>-->

        {{/* Only show thumbnail for the FIRST 3 posts */}}
        {{ if lt $index 4 }}
          {{ with index $post.Params.thumbnail 0 }}
            <figure class="grid-thumbnail">
              <img src="{{ relURL .src }}" alt="Featured Image"/>
            </figure>
          {{ end }}
        {{ end }}

        <h1><a href="{{ .RelPermalink }}">{{ .Title }}</a></h1>

        {{ if .Params.author }}
          <div class="author">{{ partial "author_names.html" . }}</div>
        {{ end }}

        <div class="summary">
          {{ with .Description }}{{ . | markdownify }}{{ else }}{{ .Summary }}{{ end }}
        </div>

        <div class="date">
          {{ $months := dict "1" "enero" "2" "febrero" "3" "marzo" "4" "abril" "5" "mayo" "6" "junio" "7" "julio" "8" "agosto" "9" "septiembre" "10" "octubre" "11" "noviembre" "12" "diciembre" }}
          {{ $day := .Date.Day }}
          {{ $month := index $months (printf "%d" .Date.Month) }}
          {{ $year := .Date.Year }}
          {{ printf "%d de %s de %d" $day $month $year }}
        </div>
      </div>
    </article>
  {{ end }}
</section>
{{ if gt $paginator.TotalPages 1 }}
<nav class="pagination">
  {{ if $paginator.HasPrev }}
    <a class="prev" href="{{ $paginator.Prev.URL }}">← Anterior</a>
  {{ end }}

  {{ range $paginator.Pagers }}
    <a class="page-number {{ if eq . $paginator }}active{{ end }}" 
       href="{{ .URL }}">{{ .PageNumber }}</a>
  {{ end }}

  {{ if $paginator.HasNext }}
    <a class="next" href="{{ $paginator.Next.URL }}">Siguiente →</a>
  {{ end }}
</nav>
{{ end }}

