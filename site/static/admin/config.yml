backend:
  name: git-gateway
  branch: main

local_backend: true

# Media settings
media_folder: "site/static/img"   # Where uploaded files are stored in the repo
public_folder: "/img"             # Public URL path used by Hugo

# Collections
collections:

  # -------------------------
  # POSTS
  # -------------------------
  - name: "post"
    label: "Posts"
    folder: "site/content/post"
    create: true
    format: "frontmatter"
    extension: "md"
    slug: "{{slug}}"

    fields:
      - { label: "Title", name: "title", widget: "string" }

      - label: "Slug"
        name: "slug"
        widget: "string"
        hint: "lo-que-va-ser-la-url-sin-acentos-ni-letras-con-simbolos-tipo-la-que-se-parece-a-la-n-con-bigote"
        pattern: ['^[a-z0-9-]+$', "Solo minúsculas, números y guiones"]

      - { label: "Publish Date", name: "date", widget: "datetime" }
      - label: "Description"
        name: "description"
        widget: "string"
        hint: "Super breve resúmen (max 148 caracteres)"
        pattern:
          - "^.{0,148}$"
          - "De 148 caracteres o menos"

      - label: "Category"
        name: "categories"
        widget: "select"
        options: ["debates", "simposios", "reseñas", "ensayos", "misceláneas"]
        multiple: true
        max: 1
        default: ["ensayos"]

      - label: "Author"
        name: "author"
        widget: "relation"
        collection: "autores"
        search_fields: ["title"]
        value_field: "title"
        display_fields: ["title"]
        multiple: true
        hint: "Elije a les autores que correspondan"

      - label: "Thumbnail"
        name: "thumbnail"
        widget: "list"
        allow_add: true     # MUST be true so the button appears
        min: 0
        max: 1              # Still only allows ONE item
        hint: "Se puede poner epígrafe (recomendado) y copyright (si queremos dar crédito a la foto)"
        fields:
          - { label: "Image",    name: "src",       widget: "image" }
          - { label: "Epigraph", name: "epigraph",  widget: "string", required: false }
          - { label: "Copyright", name: "copyright", widget: "string", required: false }

      - label: "Highlight"
        name: "highlight"
        widget: "boolean"
        default: false
        hint: "Marcar si va a la nota destacada de la home"

      - label: "Highlight 2"
        name: "highlight2"
        widget: "boolean"
        default: false
        hint: "Marcar si va a la nota destacada2 de la home"

      - label: "Exclude Thumbnail from Body"
        name: "exclude_thumbnail_from_body"
        widget: "boolean"
        default: false
        hint: "Marcar si queremos que la foto que ilustra no vaya intercalada en el cuerpo del texto"

      - label: "Frases destacadas"
        name: "highlight_phrases"
        widget: "list"
        hint: "Frases destacadas, breves que aparecerán dispersas en el artículo"
        field:
          label: "Frase"
          name: "phrase"
          widget: "string"

      - label: "Frase destacada para la Home"
        name: "featured_callout"
        widget: "number"
        hint: "Introduce el número de la frase destacada para destacar en la Home"
        min: 0         # optional: minimum value allowed
        max: 5       # optional: maximum value allowed
        step: 1        # optional: increment step
        required: false

      - label: "Publicado originalmente en"
        name: "publicado_originalmente_en"
        widget: "string"
        required: false
        hint: "Dónde fue publicado originalmente la pieza (admite markdown links internos)"

      - { label: "Body", name: "body", widget: "markdown" }


  # -------------------------
  # AUTORES
  # -------------------------
  - name: "autores"
    label: "Autores"
    label_singular: "Autor"
    folder: "site/content/autores"
    create: true
    slug: "{{slug}}"
    extension: "md"
    format: "frontmatter"
    preview_path: "autores/{{slug}}"
    identifier_field: "title"

    fields:
      - { label: "Title", name: "title", widget: "string", hint: "Nombre completo del autor" }

      - label: "Slug"
        name: "slug"
        widget: "string"
        hint: "nombre-apellido1-apellido2"
        pattern: ['^[a-z0-9-]+$', "Solo minúsculas, números y guiones"]

      - { label: "Type", name: "type", widget: "hidden", default: "authors" }

      - label: "thumbnail"
        name: "thumbnail"
        widget: "image"
        choose_url: true
        hint: "Subir la foto del perfil del autor (se guarda en static/img)"

      - label: "Short bio"
        name: "bio"
        widget: "text"
        hint: "Aparece en notas (super breve)"

      - label: "Twitter"
        name: "twitter_handle"
        widget: "string"
        hint: "Usuario de Twitter (sin arroba)"

      - label: "ORCID"
        name: "orcid"
        widget: "string"
        hint: "Número de ORCID (si se quiere)"

      - label: "Bio más larga"
        name: "body"
        widget: "markdown"
        hint: "Puede incluir links"


  # -------------------------
  # RESEÑAS
  # -------------------------
  - name: "reseñas"
    label: "Reseñas"
    label_singular: "Reseña"
    folder: "site/content/reseñas"
    create: true
    slug: "{{slug}}"
    extension: "md"
    format: "frontmatter"
    preview_path: "reseñas/{{slug}}"
    identifier_field: "title"

    fields:
      - { label: "Title", name: "title", widget: "string" }
      - { label: "Publish Date", name: "date", widget: "datetime" }
      
      - label: "Slug"
        name: "slug"
        widget: "string"
        hint: "lo-que-va-ser-la-url-sin-acentos-ni-letras-con-simbolos-tipo-la-que-se-parece-a-la-n-con-bigote"
        pattern: ['^[a-z0-9-]+$', "Solo minúsculas, números y guiones"]

      - label: "Highlight 2"
        name: "highlight2"
        widget: "boolean"
        default: false
        hint: "Marcar si va a la nota destacada de la home"

      - label: "Description"
        name: "description"
        widget: "string"
        hint: "Super breve resúmen (max 148 caracteres)"
        pattern:
          - "^.{0,148}$"
          - "De 148 caracteres o menos"

      # FIXED CATEGORY (hidden)
      - label: "Category"
        name: "categories"
        widget: "hidden"
        default: ["reseñas"]

      - label: "Author"
        name: "author"
        widget: "relation"
        collection: "autores"
        search_fields: ["title"]
        value_field: "title"
        display_fields: ["title"]
        multiple: true

      - label: "Thumbnail"
        name: "thumbnail"
        widget: "list"
        allow_add: true     # MUST be true so the button appears
        min: 0
        max: 1              # Still only allows ONE item
        hint: "Se puede poner epígrafe (recomendado) y copyright (si queremos dar crédito a la foto)"
        fields:
          - { label: "Image",    name: "src",       widget: "image" }
          - { label: "Epigraph", name: "epigraph",  widget: "string", required: false }
          - { label: "Copyright", name: "copyright", widget: "string", required: false }

      - label: "Exclude Thumbnail from Body"
        name: "exclude_thumbnail_from_body"
        widget: "boolean"
        default: false
        hint: "Marcar si queremos que la foto que ilustra no vaya intercalada en el cuerpo del texto"

      - label: "Obra reseñada"
        name: "obra_reseñada"
        widget: "string"
        hint: "Cita completa, idealmente APA"

      - label: "Pulbicado originalmente en"
        name: "publicado_originalmente_en"
        widget: "string"
        required: false
        hint: "Dónde fue publicado originalmente la pieza (admite markdown links internos)"

      - { label: "Body", name: "body", widget: "markdown" }


  # -------------------------
  # BOCANADAS
  # -------------------------
  - name: "bocanadas"
    label: "Bocanadas"
    label_singular: "bocanadas"
    folder: "site/content/bocanadas"
    create: true
    slug: "{{slug}}"
    extension: "md"
    format: "frontmatter"
    preview_path: "bocanadas/{{slug}}"
    identifier_field: "title"

    fields:
      - { label: "Title", name: "title", widget: "string" }
      - { label: "Publish Date", name: "date", widget: "datetime" }
      
      - label: "Slug"
        name: "slug"
        widget: "string"
        hint: "lo-que-va-ser-la-url-sin-acentos-ni-letras-con-simbolos-tipo-la-que-se-parece-a-la-n-con-bigote"
        pattern: ['^[a-z0-9-]+$', "Solo minúsculas, números y guiones"]

      - label: "Author"
        name: "author"
        widget: "relation"
        collection: "autores"
        search_fields: ["title"]
        value_field: "title"
        display_fields: ["title"]
        multiple: true

      - label: "Thumbnail"
        name: "thumbnail"
        widget: "list"
        allow_add: true     # MUST be true so the button appears
        min: 0
        max: 1              # Still only allows ONE item
        hint: "Se puede poner epígrafe (recomendado) y copyright (si queremos dar crédito a la foto)"
        fields:
          - { label: "Image",    name: "src",       widget: "image" }
          - { label: "Epigraph", name: "epigraph",  widget: "string", required: false }
          - { label: "Copyright", name: "copyright", widget: "string", required: false }

      - { label: "Body", name: "body", widget: "markdown" }

  # -------------------------
  # EVENTOS y LINKS - No en uso por ahora
  # -------------------------
  - name: "events"
    label: "Eventos y links"
    label_singular: "Evento"
    folder: "site/content/events"
    create: true
    slug: "{{slug}}"
    extension: "md"
    format: "frontmatter"
    preview_path: "events/{{slug}}"
    identifier_field: "title"

    fields:
      - label: "Tipo de evento"
        name: "type_of_event"
        widget: "select"
        options: ["Seminario", "Curso", "Conferencia", "Lanzamiento", "Otro"]
        default: "Seminario"

      - { label: "Título", name: "title", widget: "string" }

      - { label: "Fecha de publicación", name: "date", widget: "datetime" }

      - label: "Fecha del evento"
        name: "date_of_event"
        widget: "datetime"
        date_format: "YYYY-MM-DD"

      - label: "Lugar"
        name: "place"
        widget: "string"

      - label: "Descripción"
        name: "description"
        widget: "string"
        hint: "Resumen breve del evento (máx. 148 caracteres)"
        pattern:
          - "^.{0,148}$"
          - "Máximo 148 caracteres"

      - label: "Más información (URL)"
        name: "more_info"
        widget: "string"
        hint: "Link a más información"

      - { label: "Contenido", name: "body", widget: "markdown" }


  # -------------------------
  # CATÁSTROFE - para casos especiales
  # -------------------------
  - name: "catastrofe"
    label: "Catástrofe"
    label_singular: "Catástrofe"
    folder: "site/content/catastrofe"
    create: true
    slug: "{{slug}}"
    extension: "md"
    format: "frontmatter"
    preview_path: "catastrofe/{{slug}}"
    identifier_field: "title"

    fields:
      - { label: "Title", name: "title", widget: "string" }
      - { label: "Publish Date", name: "date", widget: "datetime" }

      - label: "Description"
        name: "description"
        widget: "string"
        hint: "Super breve resúmen (max 148 caracteres)"
        pattern:
          - "^.{0,148}$"
          - "De 148 caracteres o menos"

      # FIXED CATEGORY (hidden)
      - label: "Category"
        name: "categories"
        widget: "hidden"
        default: ["catástrofe"]

      - label: "Author"
        name: "author"
        widget: "relation"
        collection: "autores"
        search_fields: ["title"]
        value_field: "title"
        display_fields: ["title"]
        multiple: true

      - label: "Thumbnail"
        name: "thumbnail"
        widget: "image"
        required: false

      - { label: "Body", name: "body", widget: "markdown" }
